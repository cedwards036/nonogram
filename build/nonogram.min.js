/*! nonogram 2020-05-25 */

"use strict";!function u(l,a,c){function i(n,t){if(!a[n]){if(!l[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(d)return d(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var r=a[n]={exports:{}};l[n][0].call(r.exports,function(t){return i(l[n][1][t]||t)},r,r.exports,u,l,a,c)}return a[n].exports}for(var d="function"==typeof require&&require,t=0;t<c.length;t++)i(c[t]);return i}({1:[function(t,n,e){function o(t){return t.colCounts.length+"x"+t.rowCounts.length+"#"+t.rowCounts.map(function(t){return t.join(",")}).join(";")+"#"+t.colCounts.map(function(t){return t.join(",")}).join(";")}n.exports={makeGameString:o,makeGameURLComponent:function(t){return btoa(o(t))}}},{}],2:[function(t,n,e){var o,u={EMPTY:"empty",FILLED:"filled",BLANK:"blank"},l={FILL:"fill",BLANK:"blank"},a=(r(o={},u.EMPTY,l.FILL,u.FILLED),r(o,u.EMPTY,l.BLANK,u.BLANK),r(o,u.FILLED,l.FILL,u.EMPTY),r(o,u.FILLED,l.BLANK,u.EMPTY),r(o,u.BLANK,l.BLANK,u.EMPTY),r(o,u.BLANK,l.FILL,u.EMPTY),o);function r(t,n,e,o){t.hasOwnProperty(n)||(t[n]={}),t[n][e]=o}function c(t,n){for(var e={rowCounts:[],colCounts:[]},o=0;o<n;o++)e.rowCounts.push([0]);for(var r=0;r<t;r++)e.colCounts.push([0]);return e.board=i(t,n),e}function i(t,n){if(0===t||0===n)return[];for(var e=[],o=0;o<n;o++){e.push([]);for(var r=0;r<t;r++)e[o].push(u.EMPTY)}return e}function d(t,n,e,o){var r=o.board[n][e];return o.board[n][e]=a[r][t],o}function s(t,n){for(var e=[],o=0,r=0;o<t.board.length;){for(;o<t.board.length&&t.board[o][n]===u.FILLED;)r++,o++;0<r&&(e.push(r),r=0),o++}return 0===e.length?t.colCounts[n]=[0]:t.colCounts[n]=e,t}function m(t,n){for(var e=[],o=0,r=0;o<t.board[0].length;){for(;o<t.board[0].length&&t.board[n][o]===u.FILLED;)r++,o++;0<r&&(e.push(r),r=0),o++}return 0===e.length?t.rowCounts[n]=[0]:t.rowCounts[n]=e,t}n.exports={generateCreationGame:c,generateCreationBoard:i,interactWithCell:d,updateColumnCounts:s,updateRowCounts:m,makeGameFrom2DArray:function(t){for(var n=c(t[0].length,t.length),e=0;e<t.length;e++)for(var o=0;o<t[0].length;o++)1===t[e][o]&&d(l.FILL,e,o,n);for(var r=0;r<t.length;r++)m(n,r);for(var u=0;u<t[0].length;u++)s(n,u);return n},STATES:u,MESSAGES:l}},{}],3:[function(t,n,e){var r=t("./board.js").generateCreationGame,i=t("./board.js").interactWithCell,d=t("./board.js").updateColumnCounts,s=t("./board.js").updateRowCounts,o=t("./board-url.js").makeGameURLComponent,u=t("./board.js").STATES,l=t("./board.js").MESSAGES;function a(t,n,e){return/^\d+$/.test(t)&&e<=t&&t<=n}function c(t,n){var e,o=r(t,n);return function(t){for(var n=document.getElementById("cellGrid"),e=0;e<t.board.length;e++){for(var o=m(),r=0;r<t.board[e].length;r++)o.appendChild(f(t.board,e,r));n.appendChild(o)}}(e=o),function(t){L(t.rowCounts,document.getElementById("rowCounts"))}(e),function(t){L(t.colCounts,document.getElementById("colCounts"))}(e),Array.from(document.getElementsByClassName("cell")).forEach(function(t){t.addEventListener("click",function(){g(o,t,l.FILL)})}),Array.from(document.getElementsByClassName("cell")).forEach(function(n){n.addEventListener("contextmenu",function(t){g(o,n,l.BLANK),t.preventDefault()})}),o}function m(){var t=document.createElement("div");return t.setAttribute("class","row"),t}function f(t,n,e){var o=document.createElement("div");return C(o,E(t[n][e])),o.setAttribute("rowIdx",n),o.setAttribute("colIdx",e),o}function E(t){switch(t){case u.EMPTY:return"empty-cell";case u.FILLED:return"filled-cell";case u.BLANK:return"blank-cell"}}function C(t,n){t.setAttribute("class","cell "+n)}function g(t,n,e){var o,r,u,l,a=n.getAttribute("rowIdx"),c=n.getAttribute("colIdx");i(e,a,c,t),d(o=t,r=c),h(function(t){return document.getElementById("colCounts").getElementsByClassName("counts-col")[t]}(r),o.colCounts[r]),s(u=t,l=a),h(function(t){return document.getElementById("rowCounts").getElementsByClassName("counts-col")[t]}(l),u.rowCounts[l]),C(n,E(t.board[a][c])),I(t)}function L(t,o){return t.forEach(function(t){var n,e;o.appendChild((n=t,(e=document.createElement("div")).setAttribute("class","counts-col"),h(e,n)))}),o}function h(o,t){return function(t){for(;t.firstChild;)t.removeChild(t.lastChild)}(o),t.forEach(function(t){var n,e;o.appendChild((n=t,(e=document.createElement("div")).textContent=n,e.setAttribute("class","count"),e))}),o}function I(t){var n;document.getElementById("gameURL").textContent=(n=t,window.location.href+"/"+o(n))}I(c(5,5)),document.getElementById("xDimensionInput").defaultValue=5,document.getElementById("yDimensionInput").defaultValue=5,document.getElementById("dimensionsForm").onsubmit=function(){var t=document.getElementById("yDimensionInput").value,n=document.getElementById("xDimensionInput").value;a(t,15,1)&&a(n,15,1)?(document.getElementById("cellGrid").innerHTML="",document.getElementById("colCounts").innerHTML="",document.getElementById("rowCounts").innerHTML="",I(c(n,t))):(document.getElementById("yDimensionInput").value=document.getElementById("rowCounts").childElementCount,document.getElementById("xDimensionInput").value=document.getElementById("colCounts").childElementCount,alert("ERROR: invalid dimensions"));return!1}},{"./board-url.js":1,"./board.js":2}]},{},[1,2,3]);