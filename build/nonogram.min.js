/*! nonogram 2020-05-27 */

"use strict";!function u(a,i,l){function s(t,e){if(!i[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=i[t]={exports:{}};a[t][0].call(o.exports,function(e){return s(a[t][1][e]||e)},o,o.exports,u,a,i,l)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)s(l[e]);return s}({1:[function(e,t,n){var r=e("./game.js").generateSolveGame;function o(e){return e.rowCounts.map(function(e){return e.join(",")}).join(";")+"#"+e.colCounts.map(function(e){return e.join(",")}).join(";")}function u(e){function t(e){return e.split(";").map(function(e){return e.split(",").map(function(e){return parseInt(e)})})}var n=e.split("#");return{rowCounts:t(n[0]),colCounts:t(n[1])}}function a(e){var t=u(e);return r(t.rowCounts,t.colCounts)}t.exports={makeGameString:o,makeGameURLQueryString:function(e){return btoa(o(e))},parseGameString:u,buildGameFromGameString:a,buildGameFromQueryString:function(e){return a(atob(e))}}},{"./game.js":2}],2:[function(e,t,n){var r,u={EMPTY:"empty",FILLED:"filled",BLANK:"blank"},a={FILL:"fill",BLANK:"blank"},i=(o(r={},u.EMPTY,a.FILL,u.FILLED),o(r,u.EMPTY,a.BLANK,u.BLANK),o(r,u.FILLED,a.FILL,u.EMPTY),o(r,u.FILLED,a.BLANK,u.EMPTY),o(r,u.BLANK,a.BLANK,u.EMPTY),o(r,u.BLANK,a.FILL,u.EMPTY),r);function o(e,t,n,r){e.hasOwnProperty(t)||(e[t]={}),e[t][n]=r}function l(e,t){for(var n={rowCounts:[],colCounts:[]},r=0;r<t;r++)n.rowCounts.push([0]);for(var o=0;o<e;o++)n.colCounts.push([0]);return n.board=s(e,t),n}function s(e,t){if(0===e||0===t)return[];for(var n=[],r=0;r<t;r++){n.push([]);for(var o=0;o<e;o++)n[r].push(u.EMPTY)}return n}function c(e,t,n,r){var o=r.board[t][n];return r.board[t][n]=i[o][e],r}function m(e,t){for(var n=[],r=0,o=0;r<e.board.length;){for(;r<e.board.length&&e.board[r][t]===u.FILLED;)o++,r++;0<o&&(n.push(o),o=0),r++}return 0===n.length?e.colCounts[t]=[0]:e.colCounts[t]=n,e}function d(e,t){for(var n=[],r=0,o=0;r<e.board[0].length;){for(;r<e.board[0].length&&e.board[t][r]===u.FILLED;)o++,r++;0<o&&(n.push(o),o=0),r++}return 0===n.length?e.rowCounts[t]=[0]:e.rowCounts[t]=n,e}t.exports={generateSolveGame:function(e,t){return{rowCounts:e,colCounts:t,board:s(e.length,t.length)}},generateCreationGame:l,generateEmptyBoard:s,interactWithCell:c,updateColumnCounts:m,updateRowCounts:d,makeGameFrom2DArray:function(e){for(var t=l(e[0].length,e.length),n=0;n<e.length;n++)for(var r=0;r<e[0].length;r++)1===e[n][r]&&c(a.FILL,n,r,t);for(var o=0;o<e.length;o++)d(t,o);for(var u=0;u<e[0].length;u++)m(t,u);return t},STATES:u,MESSAGES:a}},{}],3:[function(e,t,n){var r=e("./ui/create-game.js").createGame,o=e("./ui/game-dimensions.js").setGameDimensions;r(5,5),document.getElementById("xDimensionInput").defaultValue=5,document.getElementById("yDimensionInput").defaultValue=5,document.getElementById("dimensionsForm").onsubmit=o},{"./ui/create-game.js":5,"./ui/game-dimensions.js":6}],4:[function(e,t,n){var u=e("../game.js").interactWithCell,a=e("../game.js").updateColumnCounts,i=e("../game.js").updateRowCounts,r=e("../game.js").MESSAGES,l=e("./render-game.js").updateLineCountsColumnDiv,s=e("./render-game.js").updateCellStateClass,c=e("./render-game.js").getCellClass,m=e("./render-game-url.js").updateGameURL;function o(e,t,n){var r=t.getAttribute("rowIdx"),o=t.getAttribute("colIdx");u(n,r,o,e),function(e,t){a(e,t);var n=function(e){return document.getElementById("colCounts").getElementsByClassName("counts-col")[e]}(t);l(n,e.colCounts[t])}(e,o),function(e,t){i(e,t);var n=function(e){return document.getElementById("rowCounts").getElementsByClassName("counts-col")[e]}(t);l(n,e.rowCounts[t])}(e,r),s(t,c(e.board[r][o])),m(e)}t.exports={addCellEventListeners:function(n){Array.from(document.getElementsByClassName("cell")).forEach(function(e){e.addEventListener("click",function(){o(n,e,r.FILL)})}),Array.from(document.getElementsByClassName("cell")).forEach(function(t){t.addEventListener("contextmenu",function(e){o(n,t,r.BLANK),e.preventDefault()})})}}},{"../game.js":2,"./render-game-url.js":7,"./render-game.js":8}],5:[function(e,t,n){var r=e("../game.js").generateCreationGame,o=e("./render-game.js").renderGame,u=e("./cell-interactions.js").addCellEventListeners,a=e("./render-game-url.js").updateGameURL;t.exports={createGame:function(e,t){var n=r(e,t);return o(n),u(n),a(n),n}}},{"../game.js":2,"./cell-interactions.js":4,"./render-game-url.js":7,"./render-game.js":8}],6:[function(e,t,n){var o=e("./create-game.js").createGame;t.exports={setGameDimensions:function(){var e,t=document.getElementById("yDimensionInput").value,n=document.getElementById("xDimensionInput").value;function r(e){return/^\d+$/.test(e)&&1<=e&&e<=15}return e=n,r(t)&&r(e)?(document.getElementById("cellGrid").innerHTML="",document.getElementById("colCounts").innerHTML="",document.getElementById("rowCounts").innerHTML="",o(n,t)):(document.getElementById("yDimensionInput").value=document.getElementById("rowCounts").childElementCount,document.getElementById("xDimensionInput").value=document.getElementById("colCounts").childElementCount,alert("ERROR: invalid dimensions")),!1}}},{"./create-game.js":5}],7:[function(e,t,n){var r=e("../game-url.js").makeGameURLQueryString;t.exports={updateGameURL:function(e){var t;document.getElementById("gameURL").textContent=(t=e,window.location.href+"/"+r(t))}}},{"../game-url.js":1}],8:[function(e,t,n){var r=e("../game.js").STATES;function u(){var e=document.createElement("div");return e.setAttribute("class","row"),e}function a(e,t,n){var r=document.createElement("div");return i(r,o(e[t][n])),r.setAttribute("rowIdx",t),r.setAttribute("colIdx",n),r}function o(e){switch(e){case r.EMPTY:return"empty-cell";case r.FILLED:return"filled-cell";case r.BLANK:return"blank-cell"}}function i(e,t){e.setAttribute("class","cell "+t)}function l(e,r){return e.forEach(function(e){var t,n;r.appendChild((t=e,(n=document.createElement("div")).setAttribute("class","counts-col"),s(n,t)))}),r}function s(r,e){return function(e){for(;e.firstChild;)e.removeChild(e.lastChild)}(r),e.forEach(function(e){var t,n;r.appendChild((t=e,(n=document.createElement("div")).textContent=t,n.setAttribute("class","count"),n))}),r}t.exports={renderGame:function(e){!function(e){for(var t=document.getElementById("cellGrid"),n=0;n<e.board.length;n++){for(var r=u(),o=0;o<e.board[n].length;o++)r.appendChild(a(e.board,n,o));t.appendChild(r)}}(e),l(e.rowCounts,document.getElementById("rowCounts")),l(e.colCounts,document.getElementById("colCounts"))},updateLineCountsColumnDiv:s,updateCellStateClass:i,getCellClass:o}},{"../game.js":2}]},{},[1,2,3,4,5,6,7,8]);